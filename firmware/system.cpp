#include "globals.h"

void CSystem::init()
{
    if (ee.setpoint == 0)   ee.setpoint = DEFAULT_SETPOINT;

    // set the system orientation to "upright"
    m_orientation = true;
}

//=========================================================================================================
// reboot() - soft reboots the system
//=========================================================================================================
void CSystem::reboot()
{
    // reboot system
    asm volatile ("jmp 0");
}
//=========================================================================================================


//=========================================================================================================
// return_to_run_mode()
//=========================================================================================================
void CSystem::return_to_run_mode()
{
    if (ee.run_mode == MANUAL)
        ManualModeMgr.start();
    else
        SetpointModeMgr.start();
}
//=========================================================================================================


//=========================================================================================================
// rotate()
//=========================================================================================================
void CSystem::rotate()
{
  m_orientation = !m_orientation;

  Knob.set_orientation(m_orientation);

  Display.set_orientation(m_orientation);
}
//=========================================================================================================


//=========================================================================================================
// set_orientation()
//=========================================================================================================
void CSystem::set_orientation(bool orientation)
{
  m_orientation = orientation;

  Knob.set_orientation(m_orientation);

  Display.set_orientation(m_orientation);
}
//=========================================================================================================
